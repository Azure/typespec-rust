// Copyright (c) Microsoft Corporation. All rights reserved.
//
// Licensed under the MIT License. See License.txt in the project root for license information.
// Code generated by Microsoft (R) Rust Code Generator. DO NOT EDIT.

use crate::models::{
    DatetimeResponseHeaderClientDefaultResult, DatetimeResponseHeaderClientRfc3339Result,
    DatetimeResponseHeaderClientRfc7231Result, DatetimeResponseHeaderClientUnixTimestampResult,
};
use azure_core::{date, headers::HeaderName, Response, Result};
use time::OffsetDateTime;

const VALUE: HeaderName = HeaderName::from_static("value");

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::default()`](crate::clients::DatetimeResponseHeaderClient::default())
pub trait DatetimeResponseHeaderClientDefaultResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientDefaultResultHeaders
    for Response<DatetimeResponseHeaderClientDefaultResult>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        match self.headers().get_optional_string(&VALUE) {
            Some(v) => Ok(Some(date::parse_rfc7231(&v)?)),
            None => Ok(None),
        }
    }
}

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::rfc3339()`](crate::clients::DatetimeResponseHeaderClient::rfc3339())
pub trait DatetimeResponseHeaderClientRfc3339ResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientRfc3339ResultHeaders
    for Response<DatetimeResponseHeaderClientRfc3339Result>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        match self.headers().get_optional_string(&VALUE) {
            Some(v) => Ok(Some(date::parse_rfc3339(&v)?)),
            None => Ok(None),
        }
    }
}

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::rfc7231()`](crate::clients::DatetimeResponseHeaderClient::rfc7231())
pub trait DatetimeResponseHeaderClientRfc7231ResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientRfc7231ResultHeaders
    for Response<DatetimeResponseHeaderClientRfc7231Result>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        match self.headers().get_optional_string(&VALUE) {
            Some(v) => Ok(Some(date::parse_rfc7231(&v)?)),
            None => Ok(None),
        }
    }
}

/// Provides access to typed response headers for [`DatetimeResponseHeaderClient::unix_timestamp()`](crate::clients::DatetimeResponseHeaderClient::unix_timestamp())
pub trait DatetimeResponseHeaderClientUnixTimestampResultHeaders: private::Sealed {
    fn value(&self) -> Result<Option<OffsetDateTime>>;
}

impl DatetimeResponseHeaderClientUnixTimestampResultHeaders
    for Response<DatetimeResponseHeaderClientUnixTimestampResult>
{
    fn value(&self) -> Result<Option<OffsetDateTime>> {
        match self.headers().get_optional_string(&VALUE) {
            Some(v) => Ok(Some(date::parse_unix_time(&v)?)),
            None => Ok(None),
        }
    }
}

mod private {
    use crate::models::{
        DatetimeResponseHeaderClientDefaultResult, DatetimeResponseHeaderClientRfc3339Result,
        DatetimeResponseHeaderClientRfc7231Result, DatetimeResponseHeaderClientUnixTimestampResult,
    };
    use azure_core::Response;

    pub trait Sealed {}

    impl Sealed for Response<DatetimeResponseHeaderClientDefaultResult> {}
    impl Sealed for Response<DatetimeResponseHeaderClientRfc3339Result> {}
    impl Sealed for Response<DatetimeResponseHeaderClientRfc7231Result> {}
    impl Sealed for Response<DatetimeResponseHeaderClientUnixTimestampResult> {}
}
