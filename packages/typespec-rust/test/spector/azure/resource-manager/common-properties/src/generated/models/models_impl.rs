// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
//
// Code generated by Microsoft (R) Rust Code Generator. DO NOT EDIT.

use super::{CloudError, ConfidentialResource, ErrorResponse, ManagedIdentityTrackedResource};
use azure_core::{error::ErrorKind, http::RequestContent, json::to_json, Result};

impl TryFrom<ConfidentialResource> for RequestContent<ConfidentialResource> {
    type Error = azure_core::Error;
    fn try_from(value: ConfidentialResource) -> Result<Self> {
        Ok(to_json(&value)?.into())
    }
}

impl TryFrom<ManagedIdentityTrackedResource> for RequestContent<ManagedIdentityTrackedResource> {
    type Error = azure_core::Error;
    fn try_from(value: ManagedIdentityTrackedResource) -> Result<Self> {
        Ok(to_json(&value)?.into())
    }
}

impl TryFrom<azure_core::Error> for CloudError {
    type Error = azure_core::Error;
    fn try_from(error: azure_core::Error) -> std::result::Result<Self, Self::Error> {
        match error.kind() {
            ErrorKind::HttpResponse {
                raw_response: Some(raw_response),
                ..
            } => Ok(raw_response.body().json()?),
            _ => Err(azure_core::Error::with_message(
                azure_core::error::ErrorKind::DataConversion,
                "ErrorKind was not HttpResponse and could not be parsed.",
            )),
        }
    }
}

impl TryFrom<azure_core::Error> for ErrorResponse {
    type Error = azure_core::Error;
    fn try_from(error: azure_core::Error) -> std::result::Result<Self, Self::Error> {
        match error.kind() {
            ErrorKind::HttpResponse {
                raw_response: Some(raw_response),
                ..
            } => Ok(raw_response.body().json()?),
            _ => Err(azure_core::Error::with_message(
                azure_core::error::ErrorKind::DataConversion,
                "ErrorKind was not HttpResponse and could not be parsed.",
            )),
        }
    }
}
