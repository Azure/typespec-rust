// Copyright (c) Microsoft Corporation. All rights reserved.
//
// Licensed under the MIT License. See License.txt in the project root for license information.
// Code generated by Microsoft (R) Rust Code Generator. DO NOT EDIT.

use super::{
    ApiError, ApiErrorBase, CloudError, ConfidentialResource, ErrorAdditionalInfo, ErrorDetail,
    ErrorResponse, InnerError, ManagedIdentityTrackedResource,
};
use azure_core::{error::ErrorKind, http::RequestContent, json::to_json, Result};

impl TryFrom<ConfidentialResource> for RequestContent<ConfidentialResource> {
    type Error = azure_core::Error;
    fn try_from(value: ConfidentialResource) -> Result<Self> {
        Ok(to_json(&value)?.into())
    }
}

impl TryFrom<ManagedIdentityTrackedResource> for RequestContent<ManagedIdentityTrackedResource> {
    type Error = azure_core::Error;
    fn try_from(value: ManagedIdentityTrackedResource) -> Result<Self> {
        Ok(to_json(&value)?.into())
    }
}

impl TryFrom<azure_core::Error> for ApiError {
    type Error = azure_core::Error;
    fn try_from(error: azure_core::Error) -> std::result::Result<Self, Self::Error> {
        match error.kind() {
            ErrorKind::HttpResponse {
                raw_response: Some(raw_response),
                ..
            } => Ok(serde_json::from_str(
                raw_response.body().clone().into_string()?.as_ref(),
            )?),
            _ => Err(azure_core::Error::with_message(
                azure_core::error::ErrorKind::DataConversion,
                "ErrorKind was not HttpResponse and could not be parsed.",
            )),
        }
    }
}

impl TryFrom<azure_core::Error> for ApiErrorBase {
    type Error = azure_core::Error;
    fn try_from(error: azure_core::Error) -> std::result::Result<Self, Self::Error> {
        match error.kind() {
            ErrorKind::HttpResponse {
                raw_response: Some(raw_response),
                ..
            } => Ok(serde_json::from_str(
                raw_response.body().clone().into_string()?.as_ref(),
            )?),
            _ => Err(azure_core::Error::with_message(
                azure_core::error::ErrorKind::DataConversion,
                "ErrorKind was not HttpResponse and could not be parsed.",
            )),
        }
    }
}

impl TryFrom<azure_core::Error> for CloudError {
    type Error = azure_core::Error;
    fn try_from(error: azure_core::Error) -> std::result::Result<Self, Self::Error> {
        match error.kind() {
            ErrorKind::HttpResponse {
                raw_response: Some(raw_response),
                ..
            } => Ok(serde_json::from_str(
                raw_response.body().clone().into_string()?.as_ref(),
            )?),
            _ => Err(azure_core::Error::with_message(
                azure_core::error::ErrorKind::DataConversion,
                "ErrorKind was not HttpResponse and could not be parsed.",
            )),
        }
    }
}

impl TryFrom<azure_core::Error> for ErrorAdditionalInfo {
    type Error = azure_core::Error;
    fn try_from(error: azure_core::Error) -> std::result::Result<Self, Self::Error> {
        match error.kind() {
            ErrorKind::HttpResponse {
                raw_response: Some(raw_response),
                ..
            } => Ok(serde_json::from_str(
                raw_response.body().clone().into_string()?.as_ref(),
            )?),
            _ => Err(azure_core::Error::with_message(
                azure_core::error::ErrorKind::DataConversion,
                "ErrorKind was not HttpResponse and could not be parsed.",
            )),
        }
    }
}

impl TryFrom<azure_core::Error> for ErrorDetail {
    type Error = azure_core::Error;
    fn try_from(error: azure_core::Error) -> std::result::Result<Self, Self::Error> {
        match error.kind() {
            ErrorKind::HttpResponse {
                raw_response: Some(raw_response),
                ..
            } => Ok(serde_json::from_str(
                raw_response.body().clone().into_string()?.as_ref(),
            )?),
            _ => Err(azure_core::Error::with_message(
                azure_core::error::ErrorKind::DataConversion,
                "ErrorKind was not HttpResponse and could not be parsed.",
            )),
        }
    }
}

impl TryFrom<azure_core::Error> for ErrorResponse {
    type Error = azure_core::Error;
    fn try_from(error: azure_core::Error) -> std::result::Result<Self, Self::Error> {
        match error.kind() {
            ErrorKind::HttpResponse {
                raw_response: Some(raw_response),
                ..
            } => Ok(serde_json::from_str(
                raw_response.body().clone().into_string()?.as_ref(),
            )?),
            _ => Err(azure_core::Error::with_message(
                azure_core::error::ErrorKind::DataConversion,
                "ErrorKind was not HttpResponse and could not be parsed.",
            )),
        }
    }
}

impl TryFrom<azure_core::Error> for InnerError {
    type Error = azure_core::Error;
    fn try_from(error: azure_core::Error) -> std::result::Result<Self, Self::Error> {
        match error.kind() {
            ErrorKind::HttpResponse {
                raw_response: Some(raw_response),
                ..
            } => Ok(serde_json::from_str(
                raw_response.body().clone().into_string()?.as_ref(),
            )?),
            _ => Err(azure_core::Error::with_message(
                azure_core::error::ErrorKind::DataConversion,
                "ErrorKind was not HttpResponse and could not be parsed.",
            )),
        }
    }
}
