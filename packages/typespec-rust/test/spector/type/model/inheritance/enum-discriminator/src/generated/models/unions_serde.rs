// Copyright (c) Microsoft Corporation. All rights reserved.
//
// Licensed under the MIT License. See License.txt in the project root for license information.
// Code generated by Microsoft (R) Rust Code Generator. DO NOT EDIT.

use super::{COLLIDES_DogKind_1, COLLIDES_SnakeKind_1, Cobra, Dog, Golden};
use azure_core::Value;
use serde::Deserialize;

impl<'de> Deserialize<'de> for COLLIDES_DogKind_1 {
    fn deserialize<D>(deserializer: D) -> Result<Self, D::Error>
    where
        D: serde::Deserializer<'de>,
    {
        let value = Value::deserialize(deserializer)?;
        match value.get("kind").and_then(Value::as_str) {
            Some("golden") => Golden::deserialize(&value)
                .map(COLLIDES_DogKind_1::Golden)
                .map_err(serde::de::Error::custom),
            _ => Dog::deserialize(&value)
                .map(COLLIDES_DogKind_1::Dog)
                .map_err(serde::de::Error::custom),
        }
    }
}

impl<'de> Deserialize<'de> for COLLIDES_SnakeKind_1 {
    fn deserialize<D>(deserializer: D) -> Result<Self, D::Error>
    where
        D: serde::Deserializer<'de>,
    {
        let value = Value::deserialize(deserializer)?;
        match value.get("kind").and_then(Value::as_str) {
            Some("cobra") => Cobra::deserialize(&value)
                .map(COLLIDES_SnakeKind_1::Cobra)
                .map_err(serde::de::Error::custom),
            None => Err(serde::de::Error::custom(
                "missing discriminator field 'kind' for COLLIDES_SnakeKind_1",
            )),
            Some(kind) => Err(serde::de::Error::custom(format!(
                "unknown variant of COLLIDES_SnakeKind_1 found: {kind}"
            ))),
        }
    }
}
